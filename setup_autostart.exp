#!/usr/bin/expect -f

set timeout 10
spawn ssh -o StrictHostKeyChecking=no pi@192.168.1.103 {chmod +x /home/pi/start_video_loop.sh && mkdir -p /home/pi/.config/autostart && cat > /home/pi/.config/autostart/video_loop.desktop << 'EOF'
[Desktop Entry]
Type=Application
Name=Video Loop
Exec=/home/pi/start_video_loop.sh
Hidden=false
NoDisplay=false
X-GNOME-Autostart-enabled=true
EOF
}

expect {
    "password:" {
        send "raspberry\r"
        exp_continue
    }
    eof
}